@inherits Umbraco.Web.Macros.PartialViewMacroPage

@using ClientDependency.Core.Mvc;
@using Umbraco.Web;

@{
    var cabId = Model.MacroParameters["cabinetId"].ToString();
    var visibleField = Model.MacroParameters["visibleInPortalField"].ToString();
    var groupField = Model.MacroParameters["groupField"].ToString();
    var subgroupField = Model.MacroParameters["subGroupField"].ToString();
    var displayNameField = Model.MacroParameters["documentNameField"].ToString();

    Html.RequiresCss("~/App_Plugins/PoweredByOprum/Components/dist/oprum-viewer/styles.bundle.css");

    Html.RequiresJs("~/App_Plugins/PoweredByOprum/Components/dist/oprum-viewer/inline.bundle.js");
    Html.RequiresJs("~/App_Plugins/PoweredByOprum/Components/dist/oprum-viewer/polyfills.bundle.js");
    Html.RequiresJs("~/App_Plugins/PoweredByOprum/Components/dist/oprum-viewer/vendor.bundle.js");
    Html.RequiresJs("~/App_Plugins/PoweredByOprum/Components/dist/oprum-viewer/main.bundle.js");
}

@if (UmbracoContext.IsFrontEndUmbracoRequest)
{
    Html.RenderCssHere();
    <oprum-viewer cabinetId="@cabId"
                  visibleInPortalField="@visibleField"
                  groupField="@groupField"
                  subGroupField="@subgroupField"
                  documentNameField="@displayNameField">Loading...
    </oprum-viewer>
    Html.RenderJsHere();
}
else
{
<div class="text-center">
    <div><i class="fa fa-user-circle"></i> <span>@Model.MacroName</span></div>
</div>
}